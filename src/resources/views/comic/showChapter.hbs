<div class="container">
    <div class="row">
        <div class="container mt-4 col-12 col-lg-12 col-xl-12">
            <ul class="breadcrumb">
                <li id="breadcrumb-item-home" class="breadcrumb-item">
                    <a href="/">Home</a>
                    <div class="triangle"></div>
                </li>
                <li id="breadcrumb-item-list" class="breadcrumb-item d-none d-sm-block d-lg-block">
                    <a href="/list-comic">Danh sách truyện</a>
                    <div class="triangle"></div>
                </li>
                <li id="breadcrumb-item-comic" class="breadcrumb-item d-none d-sm-block d-lg-block">
                    <a id="breadcrumb-name-comic" href="/comic/{{chapter.slugComic}}">{{chapter.slugComic}}</a>
                    <div class="triangle"></div>
                </li>
                <li id="breadcrumb-item-chapter" class="breadcrumb-item breadcrumb-item-active">
                    <a id="breadcrumb-name-chapter" href="#">{{chapter.name}}</a>
                    <div class="triangle"></div>
                </li>
            </ul>
        </div>

        <div class="navigation col-12 col-lg-12 col-xl-12">
            <button style="padding: 20px;"><i class="fa fa-arrow-left" aria-hidden="true"></i></button>
            <button onclick="showListChapter()" style="padding: 20px;"><i class="fa fa-bars" aria-hidden="true"></i></button>
            <button style="padding: 20px;"><i class="fa fa-arrow-right" aria-hidden="true"></i></button>
            <ul id="listChapter">
            {{#each listChapters}}
                <a href="/comic/{{this.slugComic}}/{{this.slugChapter}}">{{this.name}}</a>
            {{/each}}
            </ul>
        </div>

        <div class="col-12 col-lg-12 col-xl-12">
            <div id="chapter-comic-image">
                {{#each listImageChapter}}
                    <img src="{{this}}" alt="">
                {{/each}}
            </div>
        </div>
    </div>
</div>

<script>
    function countViewPage() {
        let slug = url => new URL(url).pathname.match(/[^\/]+/g)
        var slugNameComic = `countViewPageComic-${slug(window.location.href)[1]}`

        // lứu ý thằng key= chỉ nhận tối đa 64 ký tự 
        if(slugNameComic.length > 64) {
            slugNameComic = slugNameComic.substring(0, 63)
        }

        fetch(`https://api.countapi.xyz/update/laptop/${slugNameComic}/?amount=1`)
            .then((res) => res.json())
            .then((res) => {
                if(res.value == null) {
                    fetch(`https://api.countapi.xyz/create?namespace=laptop&key=${slugNameComic}&value=0`)
                        .then((res), countViewPage())
                }
            })
    }
    countViewPage()

    count = 0
    function showListChapter() {
        count = count + 1
        if(count % 2 == 0)
        {
            document.getElementById('listChapter').style.display = 'none'
        }else {
            document.getElementById('listChapter').style.display = 'flex'
        }
    }
</script>